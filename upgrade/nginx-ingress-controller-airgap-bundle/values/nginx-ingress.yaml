# Nginx Ingress Controller Values for Samsung SDS Airgap Environment
# Based on extracted config from devops-nginx-ingress namespace

controller:
  # Controller replica count (from extracted config)
  replicaCount: 1  # Matching current deployment
  
  # Image configuration for ECR airgap environment
  image:
    registry: 866376286331.dkr.ecr.ap-northeast-2.amazonaws.com  # ECR registry
    image: nginx-ingress-controller  # ECR repository name
    tag: "v1.12.4"
    digest: ""  # Clear digest to use tag instead
    pullPolicy: IfNotPresent
  
  # Image pull secrets for ECR access
  imagePullSecrets:
    - name: ecr-secret
  
  # Service configuration with NLB
  service:
    enabled: true
    type: LoadBalancer  # LoadBalancer with NLB annotation
    annotations:
      # Use NLB (Network Load Balancer) instead of ALB
      service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
      service.beta.kubernetes.io/aws-load-balancer-scheme: "internet-facing"
    ports:
      http: 80
      https: 443
    targetPorts:
      http: http
      https: https
    
  # Admission webhooks configuration - DISABLED for airgap environment
  # (kube-webhook-certgen image not available in airgap bundle)
  admissionWebhooks:
    enabled: false  # Disable webhooks for simpler airgap deployment
    # patch:
    #   enabled: false
    #   image:
    #     registry: your-local-registry.com
    #     image: ingress-nginx/kube-webhook-certg„Öçen
    #     tag: "v1.1.1"
    #     pullPolicy: IfNotPresent
  
  # Resource limits and requests (optimized for v1.12.4)
  resources:
    requests:
      cpu: 500m      # Base requirement for v1.12.4
      memory: 1Gi    # Base memory requirement
    limits:
      cpu: 2000m     # Increased for v1.12.4 performance
      memory: 4Gi    # Increased for v1.12.4 stability
  
  # Node selector and tolerations
  nodeSelector:
    kubernetes.io/os: linux
  
  # Pod anti-affinity
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
            - key: app.kubernetes.io/name
              operator: In
              values:
              - ingress-nginx
            - key: app.kubernetes.io/component
              operator: In
              values:
              - controller
          topologyKey: kubernetes.io/hostname

# Default backend configuration
defaultBackend:
  enabled: false  # Disable default backend for simpler on-premise deployment
  # image:
  #   registry: your-local-registry.com
  #   image: defaultbackend-amd64
  #   tag: "1.5"
  #   pullPolicy: IfNotPresent
  # imagePullSecrets:
  #   - name: your-registry-secret
  
  # resources:
  #   requests:
  #     cpu: 10m
  #     memory: 20Mi
  #   limits:
  #     cpu: 100m
  #     memory: 100Mi

# RBAC configuration
rbac:
  create: true

# Service account (matching extracted config)
serviceAccount:
  create: true
  name: "dev-sds-ingress-ingress-controller"  # From extracted config